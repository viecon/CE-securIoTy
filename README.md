# CE-securIoTy

本專案實作一個完整的 IoT 安全通訊系統，透過 WebCrypto、KMS 授權、Token 驗證與 PKI 架構，實現**裝置註冊、授權、資料加密上傳與解密顯示**等功能。所有核心元件皆自行實作，並結合 ESP32 實體裝置進行摩斯密碼加密通訊展示。

---

## 🏗️ 系統架構

     ┌────────────────────┐
     │     KMS Server     │
     │  ┌──────────────┐  │
     │  │ Token 檢查驗證 │◄────┐
     │  │ 通關密語+UUID │     │
     │  └──────────────┘     │
     └────────▲─────────────┘
              │
   ┌──────────┴───────────┐
   │                      │
┌──┴────┐            ┌────▼───┐
│Sender │            │Receiver│
│ ESP32 │            │ ESP32  │
└──┬────┘            └────┬───┘
   │                      │
   │ 上傳加密摩斯碼       │ 下載加密摩斯碼
   │（含 token、uuid）   │（附 token、uuid）
   ▼                      ▼
        ┌────────────────────┐
        │     Data Server     │
        │ - 儲存資料          │
        │ - 驗證 Token+UUID   │
        └────────────────────┘

---

## 📁 專案結構

| 目錄 / 檔案 | 說明 |
|-------------|------|
| `data_server` | 接收/儲存加密摩斯密碼與 metadata，並向 KMS 驗證 Token 合法性 |
| `kms_server`  | 處理裝置驗證、簽發 Token、進行 PKI 驗證（通關密語 + UUID） |
| `esp_sender`  | 發送端 ESP32：WebCrypto 生成金鑰，加密摩斯密碼並上傳 |
| `esp_receiver`| 接收端 ESP32：透過網頁選取要解密的檔案並閃燈顯示摩斯碼 |

